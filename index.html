<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Json-Schema</title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"/>
    <style>
        .form-group {
            position: relative;

        }

        .form-group .input-ghost {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            z-index: 3;
            width: 100%;
            opacity: 0;
        }
    </style>
</head>
<body>
<div class="col-md-8 col-md-offset-2">
    <form method="POST" action="/transform" id="form" enctype="multipart/form-data">
        <!-- COMPONENT START -->
        <div class="form-group">
            <input type="file" id="file" name="file" multiple="false" class="input-ghost"/>
            <div class="input-group input-file" name="Fichier1">
                <input type="text" id="text" class="form-control" placeholder='Choose a file...'/>
                <span class="input-group-btn">
                    <button class="btn btn-default btn-choose" type="button">Choose</button>
                </span>
            </div>
        </div>
        <!-- COMPONENT END -->
        <div class="form-group">
            <button type="submit" id="submit" class="btn btn-primary pull-right">Submit</button>
            <button type="button" id="reset" class="btn btn-danger">Reset</button>
        </div>
    </form>
    <div id="content" style="white-space: pre;">
        选择的Excel格式：第一列为字段属性，第二列为字段类型，第三列为字段注释，简单demo，轻点。。。
    </div>
</div>
<script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script th:inline="javascript">
    $('#file').on('change', function (e) {
        var name = [];
        var files = e.target.files;
        for (var i = 0; i < files.length; i++) {
            name.push(files[i].name);
        }
        $('#text').val(name.join(','));
    });


    $('#name').on('change', function () {
        var jsonSchema = $('#name').value();
        console.log(jsonSchema);
    })
    // $('#form').on('submit', function (e) {
    //     e.preventDefault();
    //     var formData = new FormData();
    //     formData.append('file', $('#file').val());
    //     $.ajax({
    //         url: '/transform',
    //         methods: 'POST',
    //         data: formData
    //     })
    //         .then(function (response) {
    //             console.log(response);
    //         });
    // });

    $('#reset').on('click', function () {
        window.location = window.location.origin;
    });

    var jsonSchema = [[${jsonSchema}]];

    if (null != jsonSchema) {
        console.log(jsonSchema);
        $('#content').html(jsonSchema);
    }


</script>


</body>
</html>